<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../bower_components/google-map/google-map.html">
<link rel="import" href="../../bower_components/paper-card/paper-card.html">
<link rel="import" href="hoverboard-icons.html">

<dom-module id="map-block">
    <template>
        <style is="custom-style" include="shared-styles flex flex-alignment positioning"></style>

        <style>
             :host {
                display: block;
                margin: 40px 0;
                position: relative;
                overflow: hidden;
                height: 500px;     
            } 

            google-map {
                height: 520px;
            }

            [slot="markers"]  {
                display: block;
            }

            .card-content {
                padding: 0 8px;
            }

             .header {
                height: 250px;
                position: relative;
            }
            .header-image {
                width: 100%;
                background-size: cover;
                background-position: 50% 50%;
                transition: background-image 1s ease-in-out;
                will-change: background-image;
            }
            .title-text {
                padding: 16px;
                position: absolute;
                bottom: 0;
                font-size: 24px;
                color: #fff;
            }

            .card {        

            --paper-card-header-text: {
                color: #FFFFFF;
                font-weight: 300;
            };

                min-width: 320px;
                max-width: 400px;
                background: #fff;
            }   

            paper-card {
                box-shadow: 24px 0 35px rgba(0, 0, 0, 0.5);
            }
     

            
            @media (min-width: 640px) {
                .card-wrapper {
                    padding-top: 50px;
                }
            }

        </style>
      
        <google-map
            zoom="{$ location.pointer.zoom $}"
            latitude="{$ location.mapCenter.latitude $}"
            longitude="{$ location.mapCenter.longitude $}"
            api-key="{$ location.apiKey $}"
            styles="[[options]]"
            disable-zoom disable-default-ui layout fit>
        <google-map-marker slot="markers"
          latitude="{$ location.pointer.latitude $}"
          longitude="{$ location.pointer.longitude $}"
        ></google-map-marker>
      </google-map>

        <div class="disable-map-events" fit></div>
        <div class="card-wrapper container" layout horizontal flex start-justified>
            <paper-card class="card">
                <div class="header paper-card">

 <div class="header-image" style="background-image: url(/images/backgrounds/location_1.jpg)" fit></div>
                    <div class="title-text">Title</div>
                </div>
                <div class="paper-card-container">
                    <div class="card-content list">
                        <paper-icon-item disabled>
                            <iron-icon icon="icons:feedback" item-icon></iron-icon>
                            <paper-item-body>DescriptionDescriptionDescriptionDescriptionDescription</paper-item-body>
                        </paper-icon-item>
                        <paper-icon-item disabled>
                            <iron-icon icon="icons:location" item-icon></iron-icon>
                            <paper-item-body two-line>
                                <div>location address</div>
                                <div secondary>locationAddressShort</div>
                            </paper-item-body>
                        </paper-icon-item>
                    </div>
                    <div class="card-actions">
                        <a class="bottom-link" href="https://www.google.com/maps/dir/{$ location.pointer.latitude $},{$ location.pointer.longitude $}/@{$ location.pointer.latitude $},{$ location.pointer.longitude $},18z"
                            target="_blank" rel="noopener noreferrer">
                            <paper-icon-button icon="icons:directions"></paper-icon-button>
                        </a>
                    </div>
                </div>
            </paper-card>
        </div>
    </template>

    <script>
        class MapBlock extends Polymer.Element {
            static get is() { return 'map-block' }

            static get properties() {
                return {
                    options: {
                        type: String,
                        value: function () {
                        return [{
                            stylers: [{
                            'lightness': 40
                            }, {
                            'visibility': 'on'
                            }, {
                            'gamma': 0.9
                            }, {
                            'weight': 0.4
                            }]
                        }, {
                            'elementType': 'labels',
                            'stylers': [{
                            'visibility': 'on'
                            }]
                        }, {
                            'featureType': 'water',
                            'stylers': [{
                            'color': '#5dc7ff'
                            }]
                        }];
                        }
                    },
                    
                    images: {
                        type: Array,
                        value: {$ location.images | dump | safe $}
                    },
                    _currentSourceIndex: {
                        type: Number,
                        value: 0
                    },
                    _currentImage: {
                        type: String
                    }
                }
            }

            //   ready() {
               
            // }

            //  previousImage() {
            //     this._currentSourceIndex = (this._currentSourceIndex > 0) ? this._currentSourceIndex - 1 : this.images.length - 1;
            //     this._currentImage = this.images[this._currentSourceIndex];
            // }

            // nextImage() {
            //     this._currentSourceIndex = (this._currentSourceIndex < this.images.length - 1) ? this._currentSourceIndex + 1 : 0;
            //     this._currentImage = this.images[this._currentSourceIndex];
            // }
        }

        customElements.define(MapBlock.is, MapBlock);
    </script>
</dom-module>
